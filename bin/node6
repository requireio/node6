#!/usr/bin/env node

var resolve = require('resolve')
var path = require('path')

// hide the original initial file from node
process.argv.splice(1, 1)

// run as a REPL if no file supplied
var loadFile = process.argv[1]
if (!loadFile) {
  return require('../repl')()
}

var firstChar = loadFile.charAt(0)
if (firstChar !== '.' && firstChar !== '/') {
  loadFile = './' + loadFile
}

loadFile = resolve.sync(loadFile, {
  basedir: process.cwd()
})

// Prepare the node6 override and run
// the target file
require('../')(path.dirname(loadFile))
require(loadFile)
